;/*FB_PKG_DELIM*/

__d("CometEntryPointDialogTrigger.react",["react","useCometEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;h||(h=d("react"));var i=h.useCallback;function a(a){var b=a.children,d=a.dialogEntryPoint,e=a.fallback,f=a.onHide,g=a.onShow,h=a.otherProps,j=a.preloadParams,k=a.preloadTrigger,l=a.tracePolicy;a=c("useCometEntryPointDialog")(d,j,k,e);var m=a[0];d=a[1];j=a[2];k=a[3];e=i(function(){m(h,f,l),g==null?void 0:g()},[m,h,f,l,g]);return b(e,d,j,k)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWMessageElementRefList",[],(function(a,b,c,d,e,f){"use strict";function a(){var a=new Map(),b=new Map(),c={contents:void 0};return{get:function(b,d){var e=a.get(b);if(e==null){c.contents=[b,d];return}return d(e)},set:function(d){var e=b.get(d);if(e!=null)return e;e=function(b){if(b==null){a["delete"](d);return}a.set(d,b);if(c.contents!=null&&c.contents[0]===d){var e=c.contents;e[0];e=e[1];e(b);c.contents=void 0;return}};b.set(d,e);return e}}}f["default"]=a}),66);
__d("useMWCurrentVisibleMessage",["I64","Int64Hooks","LSFactory","LSMessagePointQueryStoredProcedure","MWMessageElementRefList","MWPVisibleMessageContext.react","ReQL","ReQLSuspense","promiseDone","react","setTimeout","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=j||d("react");var k=b.useCallback,l=b.useEffect,m=b.useRef,n=b.useState;function a(a,b){var e=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext(),g=e.visibleMessage,j=m(c("MWMessageElementRefList")()),o=a==null?void 0:a.threadKey,p=a==null?void 0:a.threadType,q=m(),r=(h||(h=c("useReStore")))(),s=d("ReQLSuspense").useFirst(function(){if(o==null)return d("ReQL").empty();if(g==null)return d("ReQL").fromTableDescending(r.tables.messages_ranges_v2__generated).getKeyRange(o);var a=g.timestamp;return d("ReQL").fromTableDescending(r.tables.messages_ranges_v2__generated).getKeyRange(o).bounds({lte:[a]}).filter(function(b){var c=b.maxTimestampMs;b=b.minTimestampMs;return(i||(i=d("I64"))).ge(a,b)&&(i||(i=d("I64"))).le(a,c)})},[o,g,r],f.id+":59");e=n(function(){return s});var t=e[0],u=e[1];l(function(){q.current=void 0,g==null&&(b==null?void 0:b.current)!=null&&b.current.scrollToBottom()},[b,g]);var v=k(function(a){var d=b==null?void 0:b.current;if(d!=null){c("setTimeout")(function(){return d.scrollElementIntoViewIfNeeded(a)},0);return}},[b]),w=k(function(a){if(a!==q.current)return j.current.get(a,function(b){v(b),q.current=a})},[v]);l(function(){s!=null?u(s):g==null&&u(function(){})},[g,s,u]);l(function(){g!=null&&t!=null&&g.messageId!=null&&w(g.messageId)},[r,g,t,w]);d("Int64Hooks").useEffectInt64(function(){if(a!=null&&s==null&&g!=null&&g.messageId!=null){var b,e=g.messageId;b=(i||(i=d("I64"))).to_int32((b=p)!=null?b:(i||(i=d("I64"))).neg_one);if(b!==-1&&(b===15||b===16))return;c("promiseDone")(r.runInTransaction(function(b){return c("LSMessagePointQueryStoredProcedure")(c("LSFactory")(b),{messageId:e,threadKey:a.threadKey,threadType:a.threadType})},"readwrite",void 0,void 0,f.id+":146"))}},[r,g,s,o,p,a]);return{messageElementRefs:j,messageRange:t,visibleMessage:(e=g)!=null?e:void 0}}g["default"]=a}),98);
__d("useMWLSIsViewerThreadAdminUsingThreadKey",["MWPActor.react","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=d("MWPActor.react").useActor(),e=(h||(h=c("useReStore")))(),g=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.tables.participants).getKeyRange(a,b)},[e,b,a],f.id+":24");return(g=g==null?void 0:g.isAdmin)!=null?g:!1}g["default"]=a}),98);
__d("useMWV2ConversationScrollerRefs",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useMemo,j=b.useRef;function a(){var a=j(null),b=j({type:"Bottom"});return i(function(){return{scrollerRef:a,scrollPositionRef:b}},[])}g["default"]=a}),98);
__d("MWThreadUtilHooks",["LSMessagingThreadTypeUtil","MWCMThreadTypes.react","MWLSThread","MWPActor.react","ReQL","ReQLSuspense","useMWCurrentVisibleMessage","useMWLSIsViewerThreadAdminUsingThreadKey","useMWV2ConversationScrollerRefs","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){var b=c("useMWV2ConversationScrollerRefs")();b=c("useMWCurrentVisibleMessage")(a,b.scrollerRef);b=b.messageRange;b=(b=b==null?void 0:b.isLoadingBefore)!=null?b:!1;var e=a.threadKey,g=(h||(h=c("useReStore")))();a=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableDescending(g.tables.messages).getKeyRange(e).filter(function(a){return!a.isAdminMessage})},[g,e],f.id+":37");var i=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableDescending(g.tables.attachments).getKeyRange(e)},[g,e],f.id+":46");a=a!=null||i!=null;return!(a||b)}function j(a){var b=i(a);return!b?!1:d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a.threadType)}function a(a){var b=i(a);a=d("MWLSThread").useThread(a.threadKey,function(a){return a.threadSubtype});return!b?!1:d("MWCMThreadTypes.react").isIGBroadcastChannelThread(a)}function b(a){var b=j(a);a=c("useMWLSIsViewerThreadAdminUsingThreadKey")(a.threadKey);return(d("MWPActor.react").isAPPlus()||d("MWPActor.react").isPromode())&&b&&a}g.useMWIsThreadWithZeroMessage=i;g.useMWIsFBBroadcastChannelWithZeroMessage=j;g.useMWIsIGBroadcastChannelWithZeroMessage=a;g.useMWIsAdminAndFBBroadcastChannelWithZeroMessage=b}),98);
__d("IGDBroadcastChannelComposerBanner.react",["fbt","I64","IGDSBox.react","IGDSDivider.react","IGDSIconButton.react","IGDSText.react","IGDSXFilledIcon.react","MWThreadUtilHooks","PolarisGenericStrings","ThreadStatus","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||(i=d("react")),l=i.useState;function a(a){var b=d("react-compiler-runtime").c(5);a=a.thread;var e=d("MWThreadUtilHooks").useMWIsIGBroadcastChannelWithZeroMessage(a),f=l(!1),g=f[0],i=f[1];f=a.threadStatus!=null&&(j||(j=d("I64"))).equal(a.threadStatus,(j||(j=d("I64"))).of_int32(c("ThreadStatus").PAUSED));if(g||f||!e)return null;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=k.jsx(c("IGDSDivider.react"),{}),b[0]=a):a=b[0];b[1]===Symbol["for"]("react.memo_cache_sentinel")?(g=k.jsx(c("IGDSText.react"),{elementType:"h2",size:"body",children:h._(/*BTDS*/"__JHASH__y89nCglpU4V__JHASH__")}),b[1]=g):g=b[1];b[2]===Symbol["for"]("react.memo_cache_sentinel")?(f=function(){return i(!0)},b[2]=f):f=b[2];b[3]===Symbol["for"]("react.memo_cache_sentinel")?(e=k.jsxs(c("IGDSBox.react"),{alignItems:"center",direction:"row",justifyContent:"between",marginBottom:1,marginTop:4,children:[g,k.jsx(c("IGDSIconButton.react"),{onClick:f,xstyle:m.icon,children:k.jsx(c("IGDSXFilledIcon.react"),{alt:d("PolarisGenericStrings").CLOSE_TEXT,color:"ig-primary-text",size:8})})]}),b[3]=e):e=b[3];b[4]===Symbol["for"]("react.memo_cache_sentinel")?(g=k.jsxs(k.Fragment,{children:[a,k.jsxs(c("IGDSBox.react"),{marginEnd:2,marginStart:4,children:[e,k.jsx(c("IGDSText.react"),{color:"secondaryText",size:"footnote",children:h._(/*BTDS*/"__JHASH__zRrdYbS3VRC__JHASH__")})]})]}),b[4]=g):g=b[4];return g}var m={icon:{$$css:!0}};g["default"]=a}),226);
__d("IGDCreateBroadcastChannelDialogRoot.entrypoint",["IGDCreateBroadcastChannelPushPage.entrypoint","JSResourceForInteraction","NestedRelayEntryPointBuilderUtils"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){return{entryPoints:{creationPageEntrypoint:d("NestedRelayEntryPointBuilderUtils").NestedRelayEntryPoint({entryPoint:b("IGDCreateBroadcastChannelPushPage.entrypoint"),entryPointParams:a})}}},root:c("JSResourceForInteraction")("IGDCreateBroadcastChannelDialogRoot.react").__setRef("IGDCreateBroadcastChannelDialogRoot.entrypoint")};g["default"]=a}),98);
__d("IGDChannelsNullState.react",["fbt","ix","CometEntryPointDialogTrigger.react","CometTransientDialogProvider.react","IGDBaseNullState.react","IGDBroadcastChannelLoggingShapes","IGDBroadcastChannelQPL","IGDCreateBroadcastChannelDialogRoot.entrypoint","IGDSBox.react","IGDSButton.react","IGDSDialogPlaceholder.react","MDSImageFromIXValue.react","react","react-compiler-runtime","useIGDBroadcastChannelImpressionLogger"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l=i("374845");function a(){var a=d("react-compiler-runtime").c(8),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=babelHelpers["extends"]({},d("IGDBroadcastChannelLoggingShapes").BROADCAST_CHAT_OPTION_VIEWED_SHAPE,{extra:{entry_point:"channel_folder_null_state"}}),a[0]=b):b=a[0];var e=c("useIGDBroadcastChannelImpressionLogger")(b);a[1]===Symbol["for"]("react.memo_cache_sentinel")?(b=h._(/*BTDS*/"__JHASH__SXSJCbyMKBu__JHASH__"),a[1]=b):b=a[1];b=b;var f;a[2]===Symbol["for"]("react.memo_cache_sentinel")?(f=h._(/*BTDS*/"__JHASH__bEh0qTX-fbo__JHASH__"),a[2]=f):f=a[2];f=f;var g;a[3]===Symbol["for"]("react.memo_cache_sentinel")?(g=k.jsx(c("MDSImageFromIXValue.react"),{src:l}),a[3]=g):g=a[3];var i,j;a[4]===Symbol["for"]("react.memo_cache_sentinel")?(i={},j={},a[4]=i,a[5]=j):(i=a[4],j=a[5]);a[6]!==e?(f=k.jsx(c("IGDBaseNullState.react"),{descriptionText:f,icon:g,titleText:b,children:k.jsx(c("CometTransientDialogProvider.react"),{children:k.jsx(c("CometEntryPointDialogTrigger.react"),{dialogEntryPoint:c("IGDCreateBroadcastChannelDialogRoot.entrypoint"),fallback:m,otherProps:i,preloadParams:j,children:function(a){return k.jsx(c("IGDSBox.react"),{containerRef:e,children:k.jsx(c("IGDSButton.react"),{display:"block",label:h._(/*BTDS*/"__JHASH__xmqjyyyXhvZ__JHASH__"),onClick:function(){d("IGDBroadcastChannelQPL").logCreateChannelStartFromChannelFolderNullState(),a()}})})}})})}),a[6]=e,a[7]=f):f=a[7];return f}function m(a){return k.jsx(c("IGDSDialogPlaceholder.react"),{fixedHeight:!0,onClose:a,size:"large"})}m.displayName=m.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("IGDSPollPanoOutline24Icon.react",["IGDSSVGIconBase.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(3),e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx("path",{d:"M14.997 18.004h-11a1 1 0 0 0 0 2h11a1 1 0 0 0 0-2ZM20 11H4a1 1 0 0 0 0 2h16a1 1 0 0 0 0-2ZM3.995 6.003h6a1 1 0 0 0 0-2h-6a1 1 0 1 0 0 2Z"}),b[0]=e):e=b[0];b[1]!==a?(e=i.jsx(c("IGDSSVGIconBase.react"),babelHelpers["extends"]({},a,{viewBox:"0 0 24 24",children:e})),b[1]=a,b[2]=e):e=b[2];return e}b=i.memo(a);g["default"]=b}),98);
__d("IGDComposerPollButton.react",["fbt","CometLazyDialogTrigger.react","IGDBroadcastChannelQPL","IGDSIconButton.react","IGDSPollPanoOutline24Icon.react","JSResourceForInteraction","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(8);a=a.threadKey;var e=d("IGDBroadcastChannelQPL").useLogCreatePollStart(a),f;b[0]!==a?(f={onClose:k,threadKey:a},b[0]=a,b[1]=f):f=b[1];b[2]===Symbol["for"]("react.memo_cache_sentinel")?(a=c("JSResourceForInteraction")("IGDChatPollCreateDialog.react").__setRef("IGDComposerPollButton.react"),b[2]=a):a=b[2];var g;b[3]!==e?(g=function(a){return j.jsx(c("IGDSIconButton.react"),{onClick:function(){e(),a()},children:j.jsx(c("IGDSPollPanoOutline24Icon.react"),{alt:h._(/*BTDS*/"__JHASH__J5UGEKNSVBS__JHASH__").toString(),color:"ig-primary-text",size:24})})},b[3]=e,b[4]=g):g=b[4];b[5]!==f||b[6]!==g?(a=j.jsx(c("CometLazyDialogTrigger.react"),{dialogProps:f,dialogResource:a,children:g}),b[5]=f,b[6]=g,b[7]=a):a=b[7];return a}function k(){}g["default"]=a}),226);
__d("LSSetLoadingAfterOnMessageRanges",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.sortBy(b.db.table(13).fetch([[[a[0]]]]),[["maxTimestampMs","DESC"]]).next().then(function(a,c){var d=a.done;a=a.value;return d?0:(c=a.item,b.forEach(b.filter(b.db.table(13).fetch([[[c.threadKey,c.minTimestampMs,c.minMessageId]]]),function(a){return b.i64.eq(a.threadKey,c.threadKey)&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(a.minTimestampMs,c.minTimestampMs)&&a.minMessageId===c.minMessageId}),function(a){var b=a.update;a.item;return b({isLoadingAfter:!0})}))})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxSetLoadingAfterOnMessageRangesStoredProcedure";a.__tables__=["messages_ranges_v2__generated"];e.exports=a}),null);
__d("LSReportThreadViewOpen",["LSIssueNewTaskWithExtraOperations","LSSetLoadingAfterOnMessageRanges"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[void 0,void 0],d[0]=c[0],d[1]=c[1],c):(b=a.item,c=[b.syncGroup,b.threadType],d[0]=c[0],d[1]=c[1],c)})},function(a){return c.i64.neq(d[0],void 0)?c.sequence([function(a){return c.db.table(1).fetch([[[d[0]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[14]=void 0:(b=a.item,d[14]=b.syncParams)})},function(a){return d[3]=d[14]}]):c.resolve(d[3]=void 0)},function(b){return c.islc(c.db.table(12).fetch([[[a[0],c.i64.cast([0,80])]],"messageDisplayOrderAuthority"]),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var c=a.done;a=a.value;return c?d[4]=void 0:(b=a.item,d[4]=b.timestampMs)})},function(b){return c.db.table(294).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?(e=[!1,c.i64.cast([0,0]),void 0],d[6]=e[0],d[7]=e[1],d[8]=e[2],e):(b=a.item,e=[b.isStale,b.threadQueueSequenceId,b.lastSelectiveSyncTimestampMs],d[6]=e[0],d[7]=e[1],d[8]=e[2],e)})},function(a){return d[6]?d[10]=!0:d[10]=!1,c.i64.neq(d[8],void 0)?(c.i64.eq(d[1],c.i64.cast([0,152]))?d[14]=c.i64.cast([0,0]):d[14]=c.i64.cast([0,0]),d[15]=c.i64.of_float(Date.now()),c.resolve()):c.resolve()},function(e){return d[11]=new c.Map(),d[11].set("thread_key",a[0]),d[11].set("is_stale",d[10]),d[11].set("client_seq_id",d[7]),d[11].set("sync_params_encoded",d[3]),d[11].set("client_last_sync_timestamp_ms",d[8]),d[11].set("sync_group",d[0]),d[11].set("last_message_timestamp_ms",d[4]),d[12]=d[11].get("thread_key"),d[13]=c.toJSON(d[11]),c.storedProcedure(b("LSIssueNewTaskWithExtraOperations"),["report_thread_view_open","_",c.i64.to_string(d[12])].join(""),c.i64.cast([0,605]),d[13],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxReportThreadViewOpenStoredProcedure";a.__tables__=["threads","sync_groups","messages","community_thread_sync_info"];e.exports=a}),null);
__d("LSReportThreadViewOpenStoredProcedure",["LSReportThreadViewOpen","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSReportThreadViewOpen"),e.threadKey);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("useReportThreadViewOpenDebounced",["LSFactory","LSReportThreadViewOpenStoredProcedure","promiseDone","useDebouncedComet","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var d=(h||(h=c("useReStore")))();return c("useDebouncedComet")(function(){c("promiseDone")(d.runInTransaction(function(b){return c("LSReportThreadViewOpenStoredProcedure")(c("LSFactory")(b),{threadKey:a})},"readwrite",void 0,void 0,f.id+":33"))},{leading:!0,wait:b})}g["default"]=a}),98);
__d("useIGDReportThreadOpenOnMountAndFocus",["MWCMThreadTypes.react","justknobx","react","react-compiler-runtime","useReportThreadViewOpenDebounced"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useRef,k=c("justknobx")._("1757");function a(a){var b=d("react-compiler-runtime").c(6),e=j(!1),f=c("useReportThreadViewOpenDebounced")(a.threadKey,k),g;b[0]!==a.threadSubtype?(g=d("MWCMThreadTypes.react").isIGBroadcastChannelThread(a.threadSubtype),b[0]=a.threadSubtype,b[1]=g):g=b[1];var h=g;b[2]!==f||b[3]!==h?(a=function(){h&&(window.addEventListener("focus",f),e.current===!1&&(e.current=!0,f()));return function(){window.removeEventListener("focus",f)}},g=[f,h],b[2]=f,b[3]=h,b[4]=a,b[5]=g):(a=b[4],g=b[5]);i(a,g)}g["default"]=a}),98);